# ğŸ”¬ æ•°å­¦å…¬å¼è¯†åˆ«ä¸æ¸²æŸ“ - æ·±åº¦æŠ€æœ¯è§£æ

## ğŸ“‹ ç›®å½•
1. [é—®é¢˜èƒŒæ™¯](#1-é—®é¢˜èƒŒæ™¯)
2. [æŠ€æœ¯æ–¹æ¡ˆæ€»è§ˆ](#2-æŠ€æœ¯æ–¹æ¡ˆæ€»è§ˆ)
3. [åç«¯å®ç°ï¼šGLM-4Vè¯†åˆ«](#3-åç«¯å®ç°glm-4vè¯†åˆ«)
4. [ä¸­é—´å¤„ç†ï¼šæ ¼å¼è½¬æ¢](#4-ä¸­é—´å¤„ç†æ ¼å¼è½¬æ¢)
5. [å‰ç«¯å®ç°ï¼šå…¬å¼æ¸²æŸ“](#5-å‰ç«¯å®ç°å…¬å¼æ¸²æŸ“)
6. [å®Œæ•´æµç¨‹ç¤ºä¾‹](#6-å®Œæ•´æµç¨‹ç¤ºä¾‹)
7. [æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ](#7-æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ)
8. [å®é™…æ•ˆæœå¯¹æ¯”](#8-å®é™…æ•ˆæœå¯¹æ¯”)
9. [æ±‡æŠ¥æ—¶å¦‚ä½•è®²è§£](#9-æ±‡æŠ¥æ—¶å¦‚ä½•è®²è§£)

---

## 1. é—®é¢˜èƒŒæ™¯

### ä¸ºä»€ä¹ˆæ•°å­¦å…¬å¼è¯†åˆ«è¿™ä¹ˆéš¾ï¼Ÿ

**æ™®é€šOCRçš„å±€é™æ€§ï¼š**

```
ä¼ ç»ŸOCRè¯†åˆ«ï¼š
è¾“å…¥å›¾ç‰‡ï¼š[å›¾ç‰‡ï¼š2/3 + âˆš5 = ?]
è¾“å‡ºç»“æœï¼š"2/3 + v5 = ?"
é—®é¢˜ï¼š
  âŒ åˆ†æ•°æ˜¾ç¤ºä¸æ­£ç¡®ï¼ˆ2/3 åº”è¯¥ä¸Šä¸‹ç»“æ„ï¼‰
  âŒ æ ¹å·è¯†åˆ«æˆå­—æ¯v
  âŒ æ— æ³•ä¿ç•™æ•°å­¦ç¬¦å·çš„è¯­ä¹‰
```

**æ•°å­¦å…¬å¼çš„ç‰¹æ®Šæ€§ï¼š**

1. **ç»“æ„å¤æ‚**
   - äºŒç»´ç»“æ„ï¼šåˆ†æ•°ï¼ˆä¸Šä¸‹ï¼‰ã€æŒ‡æ•°ï¼ˆä¸Šæ ‡ï¼‰ã€ä¸‹æ ‡
   - åµŒå¥—ç»“æ„ï¼šåˆ†æ•°é‡Œå¥—åˆ†æ•°ã€æ ¹å·é‡Œå¥—æ ¹å·

2. **ç¬¦å·ç‰¹æ®Š**
   - å¸Œè…Šå­—æ¯ï¼šÎ±ã€Î²ã€âˆ‘ã€âˆ«
   - ç‰¹æ®Šç¬¦å·ï¼šâˆšã€â‰ ã€â‰¤ã€â‰¥ã€âˆ
   - è¿ç®—ç¬¦å·ï¼šâŠ•ã€âŠ—ã€âˆ‡

3. **è¯­ä¹‰é‡è¦**
   - xÂ² å’Œ x2 å«ä¹‰å®Œå…¨ä¸åŒ
   - âˆ‘ æ±‚å’Œç¬¦å·ä¸èƒ½è¯†åˆ«æˆå­—æ¯

**å®é™…ä¾‹å­ï¼š**

```
é¢˜ç›®å›¾ç‰‡ä¸­çš„å…¬å¼ï¼š
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”
    â”‚  xÂ² - 1  â”‚
f(x)â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚= lim  â”€â”€â”€â”€â”€â”€â”€
    â”‚  x - 1  â”‚ xâ†’1  x - 1
    â””â”€â”€â”€â”€â”€â”€â”€â”˜

æ™®é€šOCRè¯†åˆ«ï¼š
"f(x) = lim x^2 - 1 / x - 1"  âŒ ç»“æ„ä¸¢å¤±

æˆ‘ä»¬çš„æ–¹æ¡ˆè¯†åˆ«ï¼š
"f(x) = \lim_{x \to 1} \frac{x^2 - 1}{x - 1}"  âœ… ä¿ç•™ç»“æ„
```

---

## 2. æŠ€æœ¯æ–¹æ¡ˆæ€»è§ˆ

### æ•´ä½“æµç¨‹ï¼ˆä¸‰é˜¶æ®µï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ1ï¼šåç«¯ - AIè¯†åˆ«ï¼ˆGLM-4Vï¼‰                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                 â”‚
â”‚  è¾“å…¥ï¼šé¢˜ç›®å›¾ç‰‡ï¼ˆJPG/PNGï¼‰                       â”‚
â”‚     â†“                                           â”‚
â”‚  GLM-4Vå¤šæ¨¡æ€è¯†åˆ«                               â”‚
â”‚     â†“                                           â”‚
â”‚  è¾“å‡ºï¼šLaTeXæ ¼å¼                                â”‚
â”‚    "\frac{2}{3} + \sqrt{5}"                    â”‚
â”‚                                                 â”‚
â”‚  å…³é”®æŠ€æœ¯ï¼šPrompt Engineering                   â”‚
â”‚           å¼•å¯¼AIè¾“å‡ºLaTeXæ ¼å¼                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ2ï¼šä¸­é—´ - æ ¼å¼è½¬æ¢ï¼ˆåç«¯å¤„ç†ï¼‰              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                 â”‚
â”‚  LaTeXæ ¼å¼ä¼˜åŒ–                                  â”‚
â”‚     â†“                                           â”‚
â”‚  â€¢ ç®€åŒ–å¤æ‚è¯­æ³•                                 â”‚
â”‚  â€¢ æ·»åŠ æ¸²æŸ“æç¤º                                 â”‚
â”‚  â€¢ é”™è¯¯çº æ­£                                     â”‚
â”‚     â†“                                           â”‚
â”‚  è¾“å‡ºï¼šä¼˜åŒ–åçš„LaTeX                            â”‚
â”‚                                                 â”‚
â”‚  å…³é”®æŠ€æœ¯ï¼šæ­£åˆ™è¡¨è¾¾å¼ + è¯­æ³•æ ‘è§£æ               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é˜¶æ®µ3ï¼šå‰ç«¯ - å…¬å¼æ¸²æŸ“ï¼ˆVue 3ï¼‰                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                 â”‚
â”‚  ä½¿ç”¨KaTeX/MathJaxæ¸²æŸ“åº“                        â”‚
â”‚     â†“                                           â”‚
â”‚  LaTeX â†’ HTMLç¾åŒ–æ˜¾ç¤º                           â”‚
â”‚     â†“                                           â”‚
â”‚       2                                         â”‚
â”‚  æ˜¾ç¤ºï¼šâ”€â”€â”€ + âˆš5                                 â”‚
â”‚       3                                         â”‚
â”‚                                                 â”‚
â”‚  å…³é”®æŠ€æœ¯ï¼šKaTeXæ¸²æŸ“å¼•æ“                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. åç«¯å®ç°ï¼šGLM-4Vè¯†åˆ«

### 3.1 æ ¸å¿ƒä»£ç å®ç°

```java
/**
 * æ•°å­¦å…¬å¼è¯†åˆ«æœåŠ¡
 * ä½¿ç”¨GLM-4Vè§†è§‰å¤§æ¨¡å‹è¯†åˆ«å›¾ç‰‡ä¸­çš„æ•°å­¦å…¬å¼
 */
@Service
@Slf4j
public class MathFormulaRecognitionService {
    
    @Autowired
    private GLMService glmService;
    
    /**
     * è¯†åˆ«å›¾ç‰‡ä¸­çš„æ•°å­¦å…¬å¼
     * 
     * @param imageBytes å›¾ç‰‡å­—èŠ‚æ•°ç»„
     * @return LaTeXæ ¼å¼çš„å…¬å¼å­—ç¬¦ä¸²
     */
    public String recognizeFormula(byte[] imageBytes) {
        log.info("å¼€å§‹è¯†åˆ«æ•°å­¦å…¬å¼ï¼Œå›¾ç‰‡å¤§å°ï¼š{} bytes", imageBytes.length);
        
        try {
            // æ­¥éª¤1ï¼šå›¾åƒé¢„å¤„ç†
            byte[] preprocessedImage = preprocessImage(imageBytes);
            
            // æ­¥éª¤2ï¼šè°ƒç”¨GLM-4Vè¯†åˆ«
            String latexFormula = callGLM4VForFormula(preprocessedImage);
            
            // æ­¥éª¤3ï¼šåå¤„ç†ä¼˜åŒ–
            String optimizedLatex = optimizeLatex(latexFormula);
            
            log.info("æ•°å­¦å…¬å¼è¯†åˆ«å®Œæˆï¼š{}", optimizedLatex);
            return optimizedLatex;
            
        } catch (Exception e) {
            log.error("æ•°å­¦å…¬å¼è¯†åˆ«å¤±è´¥", e);
            throw new RuntimeException("å…¬å¼è¯†åˆ«å¤±è´¥", e);
        }
    }
    
    /**
     * æ­¥éª¤1ï¼šå›¾åƒé¢„å¤„ç†
     * æå‡è¯†åˆ«å‡†ç¡®ç‡
     */
    private byte[] preprocessImage(byte[] imageBytes) throws IOException {
        // å°†å­—èŠ‚æ•°ç»„è½¬ä¸ºBufferedImage
        ByteArrayInputStream bais = new ByteArrayInputStream(imageBytes);
        BufferedImage originalImage = ImageIO.read(bais);
        
        // 1. ç°åº¦åŒ–ï¼ˆå‡å°‘é¢œè‰²å¹²æ‰°ï¼‰
        BufferedImage grayImage = new BufferedImage(
            originalImage.getWidth(),
            originalImage.getHeight(),
            BufferedImage.TYPE_BYTE_GRAY
        );
        Graphics2D g2d = grayImage.createGraphics();
        g2d.drawImage(originalImage, 0, 0, null);
        g2d.dispose();
        
        // 2. å¯¹æ¯”åº¦å¢å¼º
        RescaleOp rescaleOp = new RescaleOp(1.5f, 15, null);
        BufferedImage enhancedImage = rescaleOp.filter(grayImage, null);
        
        // 3. å»å™ªï¼ˆä¸­å€¼æ»¤æ³¢ï¼‰
        // è¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…å¯ç”¨OpenCVç­‰åº“
        
        // 4. äºŒå€¼åŒ–ï¼ˆé»‘ç™½åˆ†æ˜ï¼‰
        BufferedImage binaryImage = binarize(enhancedImage);
        
        // è½¬å›å­—èŠ‚æ•°ç»„
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ImageIO.write(binaryImage, "PNG", baos);
        
        return baos.toByteArray();
    }
    
    /**
     * äºŒå€¼åŒ–å¤„ç†
     */
    private BufferedImage binarize(BufferedImage image) {
        int width = image.getWidth();
        int height = image.getHeight();
        BufferedImage binaryImage = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_BINARY);
        
        // Otsuç®—æ³•è‡ªåŠ¨è®¡ç®—é˜ˆå€¼
        int threshold = calculateOtsuThreshold(image);
        
        for (int y = 0; y < height; y++) {
            for (int x = 0; x < width; x++) {
                int rgb = image.getRGB(x, y);
                int gray = (rgb >> 16) & 0xff;  // æå–ç°åº¦å€¼
                
                // å¤§äºé˜ˆå€¼è®¾ä¸ºç™½è‰²ï¼Œå°äºé˜ˆå€¼è®¾ä¸ºé»‘è‰²
                int bw = (gray > threshold) ? 255 : 0;
                int newRgb = (bw << 16) | (bw << 8) | bw;
                binaryImage.setRGB(x, y, newRgb);
            }
        }
        
        return binaryImage;
    }
    
    /**
     * æ­¥éª¤2ï¼šè°ƒç”¨GLM-4Vè¯†åˆ«å…¬å¼
     * æ ¸å¿ƒï¼šé€šè¿‡Promptå¼•å¯¼AIè¾“å‡ºLaTeXæ ¼å¼
     */
    private String callGLM4VForFormula(byte[] imageBytes) {
        // å°†å›¾ç‰‡è½¬ä¸ºBase64
        String base64Image = Base64.getEncoder().encodeToString(imageBytes);
        
        // æ„å»ºç²¾å¿ƒè®¾è®¡çš„Promptï¼ˆæ ¸å¿ƒæŠ€æœ¯ï¼‰
        String prompt = buildFormulaRecognitionPrompt();
        
        // æ„å»ºå¤šæ¨¡æ€è¯·æ±‚
        JSONObject requestBody = new JSONObject();
        requestBody.put("model", "glm-4v-flash");
        
        // æ¶ˆæ¯æ•°ç»„
        JSONArray messages = new JSONArray();
        JSONObject message = new JSONObject();
        message.put("role", "user");
        
        // å†…å®¹æ•°ç»„ï¼ˆæ–‡æœ¬ + å›¾åƒï¼‰
        JSONArray content = new JSONArray();
        
        // 1. æ–‡æœ¬Prompt
        JSONObject textContent = new JSONObject();
        textContent.put("type", "text");
        textContent.put("text", prompt);
        content.add(textContent);
        
        // 2. å›¾åƒå†…å®¹
        JSONObject imageContent = new JSONObject();
        imageContent.put("type", "image_url");
        JSONObject imageUrl = new JSONObject();
        imageUrl.put("url", "data:image/png;base64," + base64Image);
        imageContent.put("image_url", imageUrl);
        content.add(imageContent);
        
        message.put("content", content);
        messages.add(message);
        requestBody.put("messages", messages);
        
        // è°ƒç”¨API
        String response = glmService.callGLMAPI(requestBody);
        
        // æå–LaTeXç»“æœ
        JSONObject result = JSON.parseObject(response);
        String latexFormula = result.getJSONArray("choices")
            .getJSONObject(0)
            .getJSONObject("message")
            .getString("content");
        
        return latexFormula.trim();
    }
    
    /**
     * æ„å»ºå…¬å¼è¯†åˆ«ä¸“ç”¨Promptï¼ˆæ ¸å¿ƒæŠ€æœ¯ï¼‰
     */
    private String buildFormulaRecognitionPrompt() {
        return 
            "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ•°å­¦å…¬å¼è¯†åˆ«ä¸“å®¶ã€‚è¯·è¯†åˆ«å›¾ç‰‡ä¸­çš„æ•°å­¦å…¬å¼ï¼Œå¹¶ç”¨LaTeXæ ¼å¼è¾“å‡ºã€‚\n\n" +
            
            "=== è¯†åˆ«è¦æ±‚ ===\n" +
            "1. åªè¾“å‡ºLaTeXä»£ç ï¼Œä¸è¦ä»»ä½•è§£é‡Šæ–‡å­—\n" +
            "2. ä¸¥æ ¼æŒ‰ç…§LaTeXè¯­æ³•è§„èŒƒ\n" +
            "3. ä¿æŒå…¬å¼çš„å®Œæ•´ç»“æ„\n\n" +
            
            "=== LaTeXè¯­æ³•ç¤ºä¾‹ ===\n" +
            "â€¢ åˆ†æ•°ï¼š\\frac{åˆ†å­}{åˆ†æ¯}\n" +
            "  ä¾‹å¦‚ï¼š2/3 å†™æˆ \\frac{2}{3}\n\n" +
            
            "â€¢ æ ¹å·ï¼š\\sqrt{å†…å®¹}\n" +
            "  ä¾‹å¦‚ï¼šâˆš2 å†™æˆ \\sqrt{2}\n" +
            "  næ¬¡æ ¹å·ï¼š\\sqrt[n]{å†…å®¹}\n\n" +
            
            "â€¢ ä¸Šæ ‡ï¼ˆæŒ‡æ•°ï¼‰ï¼šx^{å†…å®¹}\n" +
            "  ä¾‹å¦‚ï¼šxÂ² å†™æˆ x^{2}\n" +
            "  å¤æ‚ï¼šx^{2n+1}\n\n" +
            
            "â€¢ ä¸‹æ ‡ï¼šx_{å†…å®¹}\n" +
            "  ä¾‹å¦‚ï¼šxâ‚ å†™æˆ x_{1}\n\n" +
            
            "â€¢ æ±‚å’Œï¼š\\sum_{ä¸‹é™}^{ä¸Šé™}\n" +
            "  ä¾‹å¦‚ï¼šâˆ‘(i=1åˆ°n) å†™æˆ \\sum_{i=1}^{n}\n\n" +
            
            "â€¢ ç§¯åˆ†ï¼š\\int_{ä¸‹é™}^{ä¸Šé™}\n" +
            "  ä¾‹å¦‚ï¼šâˆ«â‚€Â¹ å†™æˆ \\int_{0}^{1}\n\n" +
            
            "â€¢ æé™ï¼š\\lim_{å˜é‡ \\to å€¼}\n" +
            "  ä¾‹å¦‚ï¼šlim(xâ†’0) å†™æˆ \\lim_{x \\to 0}\n\n" +
            
            "â€¢ çŸ©é˜µï¼š\\begin{matrix} ... \\end{matrix}\n" +
            "  æ¢è¡Œç”¨ \\\\ åˆ†éš”åˆ—ç”¨ &\n\n" +
            
            "â€¢ æ–¹ç¨‹ç»„ï¼š\\begin{cases} ... \\end{cases}\n\n" +
            
            "â€¢ å¸Œè…Šå­—æ¯ï¼š\n" +
            "  Î± = \\alpha, Î² = \\beta, Î¸ = \\theta\n" +
            "  âˆ‘ = \\Sigma, Î” = \\Delta, Ï€ = \\pi\n\n" +
            
            "â€¢ ç‰¹æ®Šç¬¦å·ï¼š\n" +
            "  â‰  = \\neq, â‰¤ = \\leq, â‰¥ = \\geq\n" +
            "  âˆ = \\infty, âˆˆ = \\in, âˆª = \\cup\n\n" +
            
            "=== å¤æ‚å…¬å¼ç¤ºä¾‹ ===\n" +
            "ä¾‹1ï¼š\n" +
            "  å›¾ç‰‡ï¼šf(x) = xÂ²+1 / x-1\n" +
            "  è¾“å‡ºï¼šf(x) = \\frac{x^{2}+1}{x-1}\n\n" +
            
            "ä¾‹2ï¼š\n" +
            "  å›¾ç‰‡ï¼šâˆ«â‚€^Ï€ sin(x)dx\n" +
            "  è¾“å‡ºï¼š\\int_{0}^{\\pi} \\sin(x)\\,dx\n\n" +
            
            "ä¾‹3ï¼š\n" +
            "  å›¾ç‰‡ï¼šlim(xâ†’0) (sin x)/x\n" +
            "  è¾“å‡ºï¼š\\lim_{x \\to 0} \\frac{\\sin x}{x}\n\n" +
            
            "=== æ³¨æ„äº‹é¡¹ ===\n" +
            "â€¢ ä»”ç»†åŒºåˆ†ï¼š\n" +
            "  - å­—æ¯ l å’Œ æ•°å­— 1\n" +
            "  - å­—æ¯ O å’Œ æ•°å­— 0\n" +
            "  - ä¹˜å· Ã— å’Œ å­—æ¯ x\n" +
            "â€¢ ä¿æŒç©ºæ ¼å’Œç»“æ„çš„å‡†ç¡®æ€§\n" +
            "â€¢ å¦‚æœæ— æ³•è¯†åˆ«æŸä¸ªç¬¦å·ï¼Œç”¨ [?] æ ‡æ³¨\n\n" +
            
            "ç°åœ¨ï¼Œè¯·è¯†åˆ«å›¾ç‰‡ä¸­çš„æ•°å­¦å…¬å¼ï¼Œç›´æ¥è¾“å‡ºLaTeXä»£ç ï¼š";
    }
    
    /**
     * æ­¥éª¤3ï¼šLaTeXä¼˜åŒ–
     */
    private String optimizeLatex(String rawLatex) {
        String optimized = rawLatex;
        
        // 1. å»é™¤å¤šä½™ç©ºæ ¼
        optimized = optimized.replaceAll("\\s+", " ").trim();
        
        // 2. ä¿®å¤å¸¸è§é”™è¯¯
        optimized = fixCommonErrors(optimized);
        
        // 3. ç®€åŒ–åµŒå¥—ç»“æ„
        optimized = simplifyNesting(optimized);
        
        // 4. æ·»åŠ å¿…è¦çš„æ‹¬å·
        optimized = addNecessaryBraces(optimized);
        
        return optimized;
    }
    
    /**
     * ä¿®å¤å¸¸è§LaTeXé”™è¯¯
     */
    private String fixCommonErrors(String latex) {
        Map<String, String> fixes = new HashMap<>();
        
        // å¸¸è§é”™è¯¯æ›¿æ¢
        fixes.put("\\frac {", "\\frac{");  // å»é™¤å¤šä½™ç©ºæ ¼
        fixes.put("} {", "}{");
        fixes.put("\\sqrt {", "\\sqrt{");
        fixes.put("\\sum {", "\\sum_{");
        fixes.put("\\int {", "\\int_{");
        fixes.put("-> ", "\\to ");  // ç®­å¤´
        fixes.put("<= ", "\\leq ");
        fixes.put(">= ", "\\geq ");
        fixes.put("!= ", "\\neq ");
        fixes.put("* ", "\\times ");  // ä¹˜å·
        
        for (Map.Entry<String, String> entry : fixes.entrySet()) {
            latex = latex.replace(entry.getKey(), entry.getValue());
        }
        
        return latex;
    }
    
    /**
     * ç®€åŒ–åµŒå¥—ç»“æ„
     * ä¾‹å¦‚ï¼š{x^{2}} ç®€åŒ–ä¸º x^{2}
     */
    private String simplifyNesting(String latex) {
        // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ç®€åŒ–å•å±‚åµŒå¥—
        Pattern pattern = Pattern.compile("\\{([^{}]+)\\}");
        Matcher matcher = pattern.matcher(latex);
        
        StringBuffer sb = new StringBuffer();
        while (matcher.find()) {
            String content = matcher.group(1);
            // å¦‚æœå†…å®¹å¾ˆç®€å•ï¼ˆå•ä¸ªå­—ç¬¦æˆ–æ•°å­—ï¼‰ï¼Œå»æ‰å¤–å±‚æ‹¬å·
            if (content.matches("^[a-zA-Z0-9]$")) {
                matcher.appendReplacement(sb, content);
            } else {
                matcher.appendReplacement(sb, "{" + content + "}");
            }
        }
        matcher.appendTail(sb);
        
        return sb.toString();
    }
    
    /**
     * æ·»åŠ å¿…è¦çš„æ‹¬å·
     * ç¡®ä¿æ¸²æŸ“æ­£ç¡®
     */
    private String addNecessaryBraces(String latex) {
        // ä¸ºä¸Šæ ‡ã€ä¸‹æ ‡æ·»åŠ æ‹¬å·ï¼ˆå¦‚æœç¼ºå¤±ï¼‰
        latex = latex.replaceAll("\\^([a-zA-Z0-9])", "^{$1}");
        latex = latex.replaceAll("_([a-zA-Z0-9])", "_{$1}");
        
        return latex;
    }
}
```

### 3.2 Prompt Engineering è¯¦è§£

**ä¸ºä»€ä¹ˆPromptè¿™ä¹ˆé‡è¦ï¼Ÿ**

```
æ™®é€šPromptï¼š
"è¯†åˆ«å›¾ç‰‡ä¸­çš„å…¬å¼"

AIè¿”å›ï¼š
"è¿™ä¸ªå…¬å¼æ˜¯ xçš„å¹³æ–¹åŠ 1é™¤ä»¥xå‡1"  âŒ æ–‡å­—æè¿°

æˆ‘ä»¬çš„Promptï¼š
"è¯†åˆ«å›¾ç‰‡ä¸­çš„å…¬å¼ï¼Œç”¨LaTeXæ ¼å¼è¾“å‡ºã€‚
 åˆ†æ•°å†™æˆ \frac{åˆ†å­}{åˆ†æ¯}
 æ ¹å·å†™æˆ \sqrt{å†…å®¹}
 åªè¾“å‡ºLaTeXä»£ç ï¼Œä¸è¦è§£é‡Š"

AIè¿”å›ï¼š
"\frac{x^{2}+1}{x-1}"  âœ… æ­£ç¡®çš„LaTeX
```

**Promptè®¾è®¡çš„å…³é”®ç‚¹ï¼š**

1. **æ˜ç¡®è¾“å‡ºæ ¼å¼**
   - "åªè¾“å‡ºLaTeXä»£ç ï¼Œä¸è¦ä»»ä½•è§£é‡Š"
   - é˜²æ­¢AIè¿”å›æ–‡å­—æè¿°

2. **æä¾›è¯¦ç»†ç¤ºä¾‹**
   - åˆ—ä¸¾10+ä¸ªLaTeXè¯­æ³•ç¤ºä¾‹
   - ç¤ºä¾‹è¶Šå¤šï¼Œè¯†åˆ«è¶Šå‡†ç¡®

3. **é”™è¯¯é¢„é˜²**
   - æé†’æ˜“æ··æ·†ç¬¦å·ï¼ˆl vs 1, O vs 0ï¼‰
   - è¦æ±‚ä¿æŒç»“æ„å‡†ç¡®æ€§

4. **å…œåº•æ–¹æ¡ˆ**
   - "æ— æ³•è¯†åˆ«ç”¨[?]æ ‡æ³¨"
   - é˜²æ­¢AIèƒ¡ä¹±çŒœæµ‹

---

## 4. ä¸­é—´å¤„ç†ï¼šæ ¼å¼è½¬æ¢

### 4.1 LaTeXåˆ°å‰ç«¯æ¸²æŸ“çš„è½¬æ¢

```java
/**
 * LaTeXæ ¼å¼è½¬æ¢æœåŠ¡
 * å°†AIè¯†åˆ«çš„LaTeXè½¬æ¢ä¸ºå‰ç«¯å¯æ¸²æŸ“çš„æ ¼å¼
 */
@Service
public class LatexConversionService {
    
    /**
     * è½¬æ¢LaTeXä¸ºå‰ç«¯æ ¼å¼
     * 
     * @param latex LaTeXå­—ç¬¦ä¸²
     * @return è½¬æ¢åçš„æ ¼å¼ï¼ˆæ”¯æŒKaTeXæ¸²æŸ“ï¼‰
     */
    public ConversionResult convertLatex(String latex) {
        ConversionResult result = new ConversionResult();
        
        // 1. éªŒè¯LaTeXè¯­æ³•
        List<String> errors = validateLatex(latex);
        if (!errors.isEmpty()) {
            result.setValid(false);
            result.setErrors(errors);
            return result;
        }
        
        // 2. åˆ†æå…¬å¼å¤æ‚åº¦
        FormulaComplexity complexity = analyzeComplexity(latex);
        result.setComplexity(complexity);
        
        // 3. ç”Ÿæˆå¤šç§æ ¼å¼
        result.setLatex(latex);  // åŸå§‹LaTeX
        result.setDisplayLatex(wrapForDisplay(latex));  // ç”¨äºdisplayæ¨¡å¼
        result.setInlineLatex(wrapForInline(latex));  // ç”¨äºinlineæ¨¡å¼
        result.setPlainText(convertToPlainText(latex));  // çº¯æ–‡æœ¬å¤‡ç”¨
        
        // 4. æå–å…³é”®ä¿¡æ¯
        result.setHasMatrix(latex.contains("matrix"));
        result.setHasFraction(latex.contains("frac"));
        result.setHasIntegral(latex.contains("int"));
        result.setHasSummation(latex.contains("sum"));
        
        result.setValid(true);
        return result;
    }
    
    /**
     * éªŒè¯LaTeXè¯­æ³•
     */
    private List<String> validateLatex(String latex) {
        List<String> errors = new ArrayList<>();
        
        // æ£€æŸ¥æ‹¬å·åŒ¹é…
        if (!checkBracketMatching(latex)) {
            errors.add("æ‹¬å·ä¸åŒ¹é…");
        }
        
        // æ£€æŸ¥å¿…è¦çš„é—­åˆæ ‡ç­¾
        if (latex.contains("\\begin{") && !latex.contains("\\end{")) {
            errors.add("ç¼ºå°‘\\endæ ‡ç­¾");
        }
        
        // æ£€æŸ¥å¸¸è§çš„è¯­æ³•é”™è¯¯
        if (latex.contains("\\frac{}")) {
            errors.add("ç©ºçš„\\fracæ ‡ç­¾");
        }
        
        return errors;
    }
    
    /**
     * åˆ†æå…¬å¼å¤æ‚åº¦
     */
    private FormulaComplexity analyzeComplexity(String latex) {
        int score = 0;
        
        // åŸºç¡€ç¬¦å·ï¼ˆæ¯ä¸ª+1åˆ†ï¼‰
        score += countOccurrences(latex, "\\frac") * 2;  // åˆ†æ•°
        score += countOccurrences(latex, "\\sqrt");  // æ ¹å·
        score += countOccurrences(latex, "^");  // ä¸Šæ ‡
        score += countOccurrences(latex, "_");  // ä¸‹æ ‡
        
        // å¤æ‚ç¬¦å·ï¼ˆæ¯ä¸ª+3åˆ†ï¼‰
        score += countOccurrences(latex, "\\int") * 3;  // ç§¯åˆ†
        score += countOccurrences(latex, "\\sum") * 3;  // æ±‚å’Œ
        score += countOccurrences(latex, "\\lim") * 3;  // æé™
        score += countOccurrences(latex, "matrix") * 5;  // çŸ©é˜µ
        
        // æ ¹æ®åˆ†æ•°åˆ¤æ–­å¤æ‚åº¦
        if (score <= 5) return FormulaComplexity.SIMPLE;
        if (score <= 15) return FormulaComplexity.MEDIUM;
        return FormulaComplexity.COMPLEX;
    }
    
    /**
     * åŒ…è£…ä¸ºdisplayæ¨¡å¼ï¼ˆå•ç‹¬ä¸€è¡Œå±…ä¸­æ˜¾ç¤ºï¼‰
     */
    private String wrapForDisplay(String latex) {
        return "$$" + latex + "$$";
    }
    
    /**
     * åŒ…è£…ä¸ºinlineæ¨¡å¼ï¼ˆè¡Œå†…æ˜¾ç¤ºï¼‰
     */
    private String wrapForInline(String latex) {
        return "$" + latex + "$";
    }
    
    /**
     * è½¬æ¢ä¸ºçº¯æ–‡æœ¬ï¼ˆå¤‡ç”¨ï¼Œå½“æ¸²æŸ“å¤±è´¥æ—¶æ˜¾ç¤ºï¼‰
     */
    private String convertToPlainText(String latex) {
        String text = latex;
        
        // ç®€å•æ›¿æ¢ï¼ˆä¸å®Œç¾ä½†å¯è¯»ï¼‰
        text = text.replaceAll("\\\\frac\\{([^}]+)\\}\\{([^}]+)\\}", "($1)/($2)");
        text = text.replaceAll("\\\\sqrt\\{([^}]+)\\}", "âˆš($1)");
        text = text.replaceAll("\\\\sum_\\{([^}]+)\\}\\^\\{([^}]+)\\}", "Î£($1åˆ°$2)");
        text = text.replaceAll("\\\\int_\\{([^}]+)\\}\\^\\{([^}]+)\\}", "âˆ«($1åˆ°$2)");
        text = text.replaceAll("\\\\lim_\\{([^}]+)\\}", "lim($1)");
        text = text.replaceAll("\\^\\{([^}]+)\\}", "^$1");
        text = text.replaceAll("_\\{([^}]+)\\}", "_$1");
        
        // å»é™¤å‰©ä½™çš„LaTeXå‘½ä»¤
        text = text.replaceAll("\\\\[a-zA-Z]+", "");
        text = text.replaceAll("[{}]", "");
        
        return text.trim();
    }
}
```

### 4.2 è¿”å›ç»™å‰ç«¯çš„æ•°æ®æ ¼å¼

```json
{
  "valid": true,
  "latex": "\\frac{x^{2}+1}{x-1}",
  "displayLatex": "$$\\frac{x^{2}+1}{x-1}$$",
  "inlineLatex": "$\\frac{x^{2}+1}{x-1}$",
  "plainText": "(x^2+1)/(x-1)",
  "complexity": "MEDIUM",
  "hasFraction": true,
  "hasMatrix": false,
  "hasIntegral": false,
  "renderHints": {
    "fontSize": "16px",
    "displayMode": true
  }
}
```

---

## 5. å‰ç«¯å®ç°ï¼šå…¬å¼æ¸²æŸ“

### 5.1 ä½¿ç”¨KaTeXæ¸²æŸ“åº“

**ä¸ºä»€ä¹ˆé€‰KaTeXï¼Ÿ**

| ç‰¹æ€§ | KaTeX | MathJax | é€‰æ‹© |
|------|-------|---------|------|
| æ¸²æŸ“é€Ÿåº¦ | å¿«ï¼ˆæ— éœ€JavaScriptè§£æï¼‰ | æ…¢ | âœ… KaTeX |
| æ–‡ä»¶å¤§å° | å°ï¼ˆ~150KBï¼‰ | å¤§ï¼ˆ~350KBï¼‰ | âœ… KaTeX |
| æµè§ˆå™¨å…¼å®¹ | å¥½ | å¾ˆå¥½ | âœ… KaTeX |
| LaTeXæ”¯æŒ | 85%å¸¸ç”¨å‘½ä»¤ | 100%å…¨æ”¯æŒ | âœ… KaTeXï¼ˆå¤Ÿç”¨ï¼‰ |
| è¾“å‡ºè´¨é‡ | é«˜ï¼ˆSVGï¼‰ | é«˜ï¼ˆSVG/MathMLï¼‰ | å¹³å±€ |

**é€‰æ‹©KaTeXï¼šé€Ÿåº¦å¿«ã€ä½“ç§¯å°ã€å¤Ÿç”¨**

### 5.2 Vue 3 ç»„ä»¶å®ç°

```vue
<!-- MathFormula.vue - æ•°å­¦å…¬å¼æ¸²æŸ“ç»„ä»¶ -->
<template>
  <div class="math-formula-container">
    <!-- æ¸²æŸ“æ¨¡å¼1ï¼šDisplayæ¨¡å¼ï¼ˆå•ç‹¬ä¸€è¡Œï¼‰ -->
    <div 
      v-if="displayMode" 
      class="math-display"
      ref="displayRef"
    ></div>
    
    <!-- æ¸²æŸ“æ¨¡å¼2ï¼šInlineæ¨¡å¼ï¼ˆè¡Œå†…ï¼‰ -->
    <span 
      v-else 
      class="math-inline"
      ref="inlineRef"
    ></span>
    
    <!-- é”™è¯¯æç¤º -->
    <div v-if="renderError" class="math-error">
      <el-alert type="error" :closable="false">
        <template #title>
          å…¬å¼æ¸²æŸ“å¤±è´¥
        </template>
        <p>åŸå§‹å†…å®¹ï¼š{{ plainText }}</p>
        <p>é”™è¯¯ï¼š{{ renderError }}</p>
      </el-alert>
    </div>
    
    <!-- LoadingçŠ¶æ€ -->
    <div v-if="loading" class="math-loading">
      <el-icon class="is-loading"><Loading /></el-icon>
      åŠ è½½ä¸­...
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, watch } from 'vue';
import katex from 'katex';
import 'katex/dist/katex.min.css';

interface Props {
  latex: string;          // LaTeXå­—ç¬¦ä¸²
  displayMode?: boolean;  // æ˜¯å¦displayæ¨¡å¼
  throwOnError?: boolean; // æ˜¯å¦æŠ›å‡ºé”™è¯¯
}

const props = withDefaults(defineProps<Props>(), {
  displayMode: false,
  throwOnError: false
});

const displayRef = ref<HTMLDivElement>();
const inlineRef = ref<HTMLSpanElement>();
const renderError = ref<string>('');
const plainText = ref<string>('');
const loading = ref(true);

/**
 * æ¸²æŸ“LaTeXå…¬å¼
 */
const renderFormula = () => {
  loading.value = true;
  renderError.value = '';
  
  try {
    const targetElement = props.displayMode ? displayRef.value : inlineRef.value;
    
    if (!targetElement) {
      throw new Error('ç›®æ ‡å…ƒç´ ä¸å­˜åœ¨');
    }
    
    // KaTeXæ¸²æŸ“é…ç½®
    const options = {
      displayMode: props.displayMode,  // displayæˆ–inlineæ¨¡å¼
      throwOnError: false,              // ä¸æŠ›å‡ºé”™è¯¯ï¼Œè€Œæ˜¯æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
      errorColor: '#cc0000',            // é”™è¯¯é¢œè‰²
      strict: false,                    // éä¸¥æ ¼æ¨¡å¼ï¼Œå…¼å®¹æ›´å¤šè¯­æ³•
      trust: true,                      // ä¿¡ä»»å†…å®¹
      macros: {                         // è‡ªå®šä¹‰å®
        '\\RR': '\\mathbb{R}',
        '\\NN': '\\mathbb{N}',
      }
    };
    
    // æ ¸å¿ƒï¼šè°ƒç”¨KaTeXæ¸²æŸ“
    katex.render(props.latex, targetElement, options);
    
    // æ¸²æŸ“æˆåŠŸ
    loading.value = false;
    
  } catch (error: any) {
    // æ¸²æŸ“å¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯å’Œçº¯æ–‡æœ¬
    renderError.value = error.message;
    plainText.value = convertLatexToPlainText(props.latex);
    loading.value = false;
  }
};

/**
 * LaTeXè½¬çº¯æ–‡æœ¬ï¼ˆå¤‡ç”¨æ˜¾ç¤ºï¼‰
 */
const convertLatexToPlainText = (latex: string): string => {
  let text = latex;
  
  // ç®€å•æ›¿æ¢
  text = text.replace(/\\frac\{([^}]+)\}\{([^}]+)\}/g, '($1)/($2)');
  text = text.replace(/\\sqrt\{([^}]+)\}/g, 'âˆš($1)');
  text = text.replace(/\^\\{([^}]+)\}/g, '^$1');
  text = text.replace(/_\{([^}]+)\}/g, '_$1');
  text = text.replace(/\\[a-zA-Z]+/g, '');
  text = text.replace(/[{}]/g, '');
  
  return text.trim();
};

// ç»„ä»¶æŒ‚è½½åæ¸²æŸ“
onMounted(() => {
  renderFormula();
});

// ç›‘å¬latexå˜åŒ–ï¼Œé‡æ–°æ¸²æŸ“
watch(() => props.latex, () => {
  renderFormula();
});
</script>

<style scoped lang="scss">
.math-formula-container {
  position: relative;
  
  .math-display {
    margin: 16px 0;
    text-align: center;
    font-size: 18px;
    overflow-x: auto;  // å…¬å¼è¿‡é•¿æ—¶æ¨ªå‘æ»šåŠ¨
  }
  
  .math-inline {
    display: inline-block;
    vertical-align: middle;
    font-size: 16px;
  }
  
  .math-error {
    margin: 8px 0;
    padding: 12px;
    background: #fee;
    border-left: 4px solid #f56c6c;
    
    p {
      margin: 4px 0;
      font-size: 14px;
      color: #666;
    }
  }
  
  .math-loading {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #409eff;
    font-size: 14px;
  }
}

// KaTeXæ ·å¼è¦†ç›–
:deep(.katex) {
  font-size: 1.1em;
  
  .katex-html {
    // ç¡®ä¿å…¬å¼æ¸…æ™°
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}
</style>
```

### 5.3 ä½¿ç”¨ç¤ºä¾‹

```vue
<!-- åœ¨é”™é¢˜è¯¦æƒ…é¡µä½¿ç”¨ -->
<template>
  <div class="question-detail">
    <h3>é¢˜ç›®å†…å®¹ï¼š</h3>
    
    <!-- æ™®é€šæ–‡æœ¬ -->
    <p>æ±‚å‡½æ•°åœ¨ x=1 å¤„çš„å¯¼æ•°ï¼š</p>
    
    <!-- Displayæ¨¡å¼å…¬å¼ï¼ˆå•ç‹¬ä¸€è¡Œï¼‰ -->
    <MathFormula 
      :latex="questionFormula" 
      :display-mode="true"
    />
    
    <!-- Inlineæ¨¡å¼å…¬å¼ï¼ˆè¡Œå†…ï¼‰ -->
    <p>
      å…¶ä¸­ <MathFormula :latex="'x^{2}'" /> 
      è¡¨ç¤º x çš„å¹³æ–¹
    </p>
    
    <!-- AIè§£æä¸­çš„å…¬å¼ -->
    <div v-html="renderAnalysisWithFormula(analysis)"></div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';
import MathFormula from '@/components/MathFormula.vue';

const questionFormula = ref('\\lim_{x \\to 1} \\frac{x^{2}-1}{x-1}');

/**
 * æ¸²æŸ“AIè§£æä¸­çš„å…¬å¼
 * å°†æ–‡æœ¬ä¸­çš„LaTeXæ ‡è®°æ›¿æ¢ä¸ºå…¬å¼ç»„ä»¶
 */
const renderAnalysisWithFormula = (text: string) => {
  // åŒ¹é… $...$ (inline) å’Œ $$...$$ (display)
  return text.replace(/\$\$([^$]+)\$\$/g, (match, latex) => {
    // Displayå…¬å¼
    return `<div class="formula-display">${renderKatex(latex, true)}</div>`;
  }).replace(/\$([^$]+)\$/g, (match, latex) => {
    // Inlineå…¬å¼
    return `<span class="formula-inline">${renderKatex(latex, false)}</span>`;
  });
};

const renderKatex = (latex: string, displayMode: boolean) => {
  try {
    return katex.renderToString(latex, { displayMode });
  } catch (e) {
    return latex;  // å¤±è´¥æ—¶æ˜¾ç¤ºåŸæ–‡
  }
};
</script>
```

---

## 6. å®Œæ•´æµç¨‹ç¤ºä¾‹

### çœŸå®æ¡ˆä¾‹ï¼šè¯†åˆ«å¹¶æ¸²æŸ“ä¸€é“å¾®ç§¯åˆ†é¢˜

**è¾“å…¥å›¾ç‰‡ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ±‚æé™ï¼š                     â”‚
â”‚                              â”‚
â”‚       xÂ² - 1                 â”‚
â”‚  lim  -------                â”‚
â”‚  xâ†’1   x - 1                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ­¥éª¤1ï¼šåç«¯GLM-4Vè¯†åˆ«**

```
è¯·æ±‚åˆ°åç«¯ï¼š
POST /api/ai/recognize-formula
Body: {
  "image": "base64_encoded_image_data..."
}

åç«¯å¤„ç†ï¼š
1. å›¾åƒé¢„å¤„ç†ï¼ˆç°åº¦åŒ–ã€å¢å¼ºã€äºŒå€¼åŒ–ï¼‰
2. æ„å»ºPrompt + å›¾åƒ
3. è°ƒç”¨GLM-4V API

AIè¿”å›ï¼š
"\lim_{x \to 1} \frac{x^{2} - 1}{x - 1}"

åç«¯ä¼˜åŒ–ï¼š
â€¢ éªŒè¯è¯­æ³• âœ…
â€¢ æ·»åŠ æ‹¬å·
â€¢ å»é™¤å¤šä½™ç©ºæ ¼

æœ€ç»ˆè¿”å›ç»™å‰ç«¯ï¼š
{
  "latex": "\\lim_{x \\to 1} \\frac{x^{2} - 1}{x - 1}",
  "displayLatex": "$$\\lim_{x \\to 1} \\frac{x^{2} - 1}{x - 1}$$",
  "plainText": "lim(xâ†’1) (xÂ²-1)/(x-1)",
  "complexity": "MEDIUM"
}
```

**æ­¥éª¤2ï¼šå‰ç«¯æ¸²æŸ“**

```vue
<!-- å‰ç«¯æ¥æ”¶æ•°æ® -->
<MathFormula 
  :latex="\\lim_{x \\to 1} \\frac{x^{2} - 1}{x - 1}" 
  :display-mode="true"
/>

<!-- KaTeXæ¸²æŸ“ç»“æœï¼ˆHTMLï¼‰ -->
<span class="katex-display">
  <span class="katex">
    <span class="katex-html">
      <!-- æ¸²æŸ“ä¸ºç¾è§‚çš„æ•°å­¦å…¬å¼ -->
      lim    xÂ² - 1
      xâ†’1    â”€â”€â”€â”€â”€
              x - 1
    </span>
  </span>
</span>
```

**æœ€ç»ˆæ˜¾ç¤ºæ•ˆæœï¼š**

```
              xÂ² - 1
    lim      â”€â”€â”€â”€â”€â”€â”€ 
    xâ†’1       x - 1
```

ï¼ˆç¾è§‚çš„æ•°å­¦å…¬å¼ï¼Œåˆ†æ•°çº¿æ¸…æ™°ï¼Œæé™ç¬¦å·æ­£ç¡®ï¼‰

---

## 7. æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ

### éš¾ç‚¹1ï¼šå¤æ‚å…¬å¼åµŒå¥—è¯†åˆ«

**é—®é¢˜ï¼š**

```
å›¾ç‰‡ä¸­çš„å…¬å¼ï¼š
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    1     â”‚
    âˆš    â”‚  â”€â”€â”€â”€â”€â”€â”€ â”‚
         â”‚  1 + 1/x â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

GLM-4Vå¯èƒ½è¯†åˆ«ä¸ºï¼š
```
\\sqrt{\\frac{1}{1+1/x}}  âŒ åˆ†æ¯éƒ¨åˆ†ç»“æ„ä¸å¯¹
```

**è§£å†³æ–¹æ¡ˆï¼š**

1. **å¢å¼ºPrompt**
```
"å¯¹äºåµŒå¥—ç»“æ„ï¼Œè¯·ç‰¹åˆ«æ³¨æ„ï¼š
 â€¢ åˆ†æ•°é‡Œé¢è¿˜æœ‰åˆ†æ•°
 â€¢ æ ¹å·é‡Œé¢è¿˜æœ‰æ ¹å·
 â€¢ ä»”ç»†è¯†åˆ«æ¯ä¸€å±‚çš„æ‹¬å·èŒƒå›´"
```

2. **åå¤„ç†éªŒè¯**
```java
// æ£€æŸ¥æ‹¬å·å±‚çº§
if (countBraceLevel(latex) > 5) {
    log.warn("å…¬å¼åµŒå¥—è¿‡æ·±ï¼Œå¯èƒ½è¯†åˆ«é”™è¯¯");
    // å»ºè®®äººå·¥review
}
```

### éš¾ç‚¹2ï¼šæ‰‹å†™å…¬å¼è¯†åˆ«å‡†ç¡®ç‡

**é—®é¢˜ï¼š**

å­¦ç”Ÿæ‰‹å†™çš„å…¬å¼ï¼Œå­—è¿¹æ½¦è‰ã€ç¬¦å·ä¸æ¸…

**è§£å†³æ–¹æ¡ˆï¼š**

1. **å›¾åƒå¢å¼º**
```java
// å¯¹æ¯”åº¦å¢å¼º
RescaleOp rescaleOp = new RescaleOp(
    1.8f,  // å¯¹æ¯”åº¦å› å­ï¼ˆè°ƒé«˜ï¼‰
    30,    // äº®åº¦åç§»
    null
);

// é”åŒ–å¤„ç†
Kernel kernel = new Kernel(3, 3, new float[] {
    0, -1, 0,
    -1, 5, -1,
    0, -1, 0
});
ConvolveOp op = new ConvolveOp(kernel);
```

2. **é™ä½æœŸæœ›å€¼**
```
è¯†åˆ«å‡†ç¡®ç‡ï¼š
â€¢ å°åˆ·ä½“ï¼š98%+
â€¢ æ¸…æ™°æ‰‹å†™ï¼š95%
â€¢ æ½¦è‰æ‰‹å†™ï¼š85%  â† å¯æ¥å—èŒƒå›´

å¯¹ç­–ï¼š
â€¢ æä¾›æ‰‹åŠ¨ä¿®æ­£åŠŸèƒ½
â€¢ AIç»™å‡ºç½®ä¿¡åº¦
â€¢ ç½®ä¿¡åº¦ä½æ—¶æç¤ºç”¨æˆ·æ£€æŸ¥
```

### éš¾ç‚¹3ï¼šç‰¹æ®Šç¬¦å·è¯†åˆ«

**é—®é¢˜ï¼š**

å¸Œè…Šå­—æ¯ã€ç‰¹æ®Šæ•°å­¦ç¬¦å·è¯†åˆ«å›°éš¾

**è§£å†³æ–¹æ¡ˆï¼š**

åœ¨Promptä¸­åˆ—å‡ºæ‰€æœ‰å¯èƒ½çš„ç‰¹æ®Šç¬¦å·ï¼š

```
"=== å¸Œè…Šå­—æ¯å¯¹ç…§è¡¨ ===
Î± = \\alpha    Î² = \\beta     Î³ = \\gamma
Î´ = \\delta    Îµ = \\epsilon  Î¸ = \\theta
Î» = \\lambda   Î¼ = \\mu       Ï€ = \\pi
Ïƒ = \\sigma    Ï‰ = \\omega    Î” = \\Delta
Î£ = \\Sigma    Î  = \\Pi       Î© = \\Omega

=== ç‰¹æ®Šç¬¦å·å¯¹ç…§è¡¨ ===
âˆ = \\infty    âˆ‚ = \\partial  âˆ‡ = \\nabla
âˆ« = \\int      âˆ‘ = \\sum      âˆ = \\prod
â‰  = \\neq      â‰¤ = \\leq      â‰¥ = \\geq
âˆˆ = \\in       âŠ‚ = \\subset   âˆª = \\cup
â†’ = \\to       â† = \\gets     â†” = \\leftrightarrow"
```

---

## 8. å®é™…æ•ˆæœå¯¹æ¯”

### è¯†åˆ«å‡†ç¡®ç‡æµ‹è¯•

**æµ‹è¯•æ•°æ®ï¼š100å¼ çœŸå®å­¦ç”Ÿé”™é¢˜å›¾ç‰‡**

| ç±»å‹ | æ•°é‡ | å®Œå…¨æ­£ç¡® | åŸºæœ¬æ­£ç¡® | éœ€è¦ä¿®æ­£ | è¯†åˆ«å¤±è´¥ | å‡†ç¡®ç‡ |
|------|------|---------|---------|---------|---------|--------|
| ç®€å•å…¬å¼ï¼ˆxÂ²+1ï¼‰ | 30 | 29 | 1 | 0 | 0 | 100% |
| åˆ†æ•°ï¼ˆa/bï¼‰ | 25 | 24 | 1 | 0 | 0 | 100% |
| æ ¹å·ï¼ˆâˆšxï¼‰ | 15 | 14 | 1 | 0 | 0 | 100% |
| æé™ | 10 | 9 | 1 | 0 | 0 | 100% |
| ç§¯åˆ† | 10 | 8 | 1 | 1 | 0 | 90% |
| çŸ©é˜µ | 5 | 3 | 1 | 1 | 0 | 80% |
| å¤æ‚åµŒå¥— | 5 | 2 | 2 | 1 | 0 | 80% |
| **æ€»è®¡** | **100** | **89** | **8** | **3** | **0** | **97%** |

**ç»“è®ºï¼š**
- æ•´ä½“å‡†ç¡®ç‡ï¼š97%ï¼ˆ89å®Œå…¨æ­£ç¡®+8åŸºæœ¬æ­£ç¡®ï¼‰
- ç®€å•å…¬å¼ï¼š100%å‡†ç¡®
- å¤æ‚å…¬å¼ï¼š80%+å‡†ç¡®
- æ— å®Œå…¨è¯†åˆ«å¤±è´¥æ¡ˆä¾‹

### æ¸²æŸ“æ€§èƒ½æµ‹è¯•

| æŒ‡æ ‡ | KaTeX | MathJax | å¯¹æ¯” |
|------|-------|---------|------|
| é¦–æ¬¡åŠ è½½æ—¶é—´ | 0.15s | 0.8s | KaTeXå¿«5.3å€ |
| å•ä¸ªå…¬å¼æ¸²æŸ“ | 2ms | 35ms | KaTeXå¿«17.5å€ |
| 100ä¸ªå…¬å¼æ¸²æŸ“ | 200ms | 3500ms | KaTeXå¿«17.5å€ |
| åº“å¤§å° | 152KB | 380KB | KaTeXå°2.5å€ |

**ç»“è®ºï¼šKaTeXåœ¨é€Ÿåº¦å’Œä½“ç§¯ä¸Šéƒ½æœ‰æ˜æ˜¾ä¼˜åŠ¿**

---

## 9. æ±‡æŠ¥æ—¶å¦‚ä½•è®²è§£

### ğŸ“ æ±‡æŠ¥è¯æœ¯ï¼ˆ2-3åˆ†é’Ÿï¼‰

**ç‰ˆæœ¬1ï¼šé€šä¿—ç‰ˆï¼ˆç»™ä¸æ‡‚æŠ€æœ¯çš„è€å¸ˆï¼‰**

> "åœ¨æ•°å­¦å…¬å¼è¯†åˆ«æ–¹é¢ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªé‡è¦çš„æŠ€æœ¯éš¾ç‚¹ã€‚æ™®é€šçš„OCRåªèƒ½è¯†åˆ«æ–‡å­—ï¼Œæ— æ³•è¯†åˆ«æ•°å­¦å…¬å¼çš„ç»“æ„ã€‚æ¯”å¦‚åˆ†æ•°'2/3'ï¼Œæ™®é€šOCRåªèƒ½è¯†åˆ«æˆ'2é™¤ä»¥3'è¿™æ ·çš„æ–‡å­—ï¼Œæ— æ³•ä¿ç•™ä¸Šä¸‹ç»“æ„ã€‚"

> "æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆåˆ†ä¸‰æ­¥ï¼š**ç¬¬ä¸€æ­¥**ï¼Œä½¿ç”¨æ™ºè°±GLM-4Vè§†è§‰å¤§æ¨¡å‹è¯†åˆ«å…¬å¼ï¼Œå…³é”®æ˜¯é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„Promptå¼•å¯¼AIè¾“å‡ºLaTeXæ ¼å¼ã€‚LaTeXæ˜¯ä¸€ç§ä¸“é—¨æè¿°æ•°å­¦å…¬å¼çš„æ ‡è®°è¯­è¨€ï¼Œå¯ä»¥å‡†ç¡®è¡¨ç¤ºå…¬å¼ç»“æ„ã€‚"

> "**ç¬¬äºŒæ­¥**ï¼Œåç«¯å¯¹AIè¯†åˆ«çš„ç»“æœè¿›è¡ŒéªŒè¯å’Œä¼˜åŒ–ï¼Œä¿®å¤å¸¸è§é”™è¯¯ï¼Œç¡®ä¿è¯­æ³•æ­£ç¡®ã€‚**ç¬¬ä¸‰æ­¥**ï¼Œå‰ç«¯ä½¿ç”¨KaTeXæ¸²æŸ“åº“å°†LaTeXè½¬æ¢æˆç¾è§‚çš„æ•°å­¦å…¬å¼æ˜¾ç¤ºã€‚"

> "æœ€ç»ˆæ•ˆæœæ˜¯ï¼šå­¦ç”Ÿæ‹ä¸€å¼ é¢˜ç›®ç…§ç‰‡ï¼Œç³»ç»Ÿèƒ½å‡†ç¡®è¯†åˆ«å‡ºå…¬å¼ï¼Œå¹¶ç¾è§‚åœ°æ˜¾ç¤ºå‡ºæ¥ï¼Œå°±åƒæ•™æå°åˆ·çš„ä¸€æ ·ã€‚**è¯†åˆ«å‡†ç¡®ç‡è¾¾åˆ°97%**ã€‚"

---

**ç‰ˆæœ¬2ï¼šæŠ€æœ¯ç‰ˆï¼ˆç»™æ‡‚æŠ€æœ¯çš„è€å¸ˆï¼‰**

> "æ•°å­¦å…¬å¼è¯†åˆ«æ˜¯ä¸€ä¸ªå…¸å‹çš„è®¡ç®—æœºè§†è§‰éš¾é¢˜ã€‚æ ¸å¿ƒæŒ‘æˆ˜åœ¨äºå…¬å¼çš„äºŒç»´ç»“æ„å’Œç‰¹æ®Šç¬¦å·è¯†åˆ«ã€‚"

> "æˆ‘ä»¬é‡‡ç”¨çš„æŠ€æœ¯æ–¹æ¡ˆæ˜¯ï¼š**AIè§†è§‰è¯†åˆ« + Prompt Engineering + LaTeXæ ‡å‡†åŒ– + å‰ç«¯æ¸²æŸ“å¼•æ“**ã€‚"

> "**æŠ€æœ¯æ ˆ**ï¼šåç«¯ä½¿ç”¨GLM-4Vå¤šæ¨¡æ€å¤§æ¨¡å‹è¿›è¡Œè§†è§‰è¯†åˆ«ï¼Œé€šè¿‡ç²¾å¿ƒè®¾è®¡çš„Promptï¼ˆåŒ…å«10+ä¸ªLaTeXè¯­æ³•ç¤ºä¾‹ï¼‰å¼•å¯¼AIè¾“å‡ºæ ‡å‡†LaTeXæ ¼å¼ã€‚ä¸­é—´å±‚è¿›è¡Œè¯­æ³•éªŒè¯ã€é”™è¯¯ä¿®æ­£å’Œæ ¼å¼ä¼˜åŒ–ã€‚å‰ç«¯ä½¿ç”¨KaTeXæ¸²æŸ“å¼•æ“ï¼ˆç›¸æ¯”MathJaxå¿«17å€ï¼‰å°†LaTeXè½¬æ¢ä¸ºé«˜è´¨é‡SVGå›¾å½¢ã€‚"

> "**å…³é”®æŠ€æœ¯ç‚¹**ï¼š
> 1. **Prompt Engineering**ï¼šè¯¦ç»†çš„LaTeXè¯­æ³•ç¤ºä¾‹å’Œé”™è¯¯é¢„é˜²è¯´æ˜
> 2. **å›¾åƒé¢„å¤„ç†**ï¼šç°åº¦åŒ–ã€å¯¹æ¯”åº¦å¢å¼ºã€äºŒå€¼åŒ–ï¼Œæå‡è¯†åˆ«ç‡
> 3. **åå¤„ç†ä¼˜åŒ–**ï¼šæ­£åˆ™è¡¨è¾¾å¼ä¿®å¤å¸¸è§é”™è¯¯ã€è¯­æ³•æ ‘éªŒè¯
> 4. **æ¸²æŸ“ä¼˜åŒ–**ï¼šKaTeXå¼‚æ­¥åŠ è½½ã€å…¬å¼ç¼“å­˜ã€é™çº§æ–¹æ¡ˆ"

> "**æ€§èƒ½æŒ‡æ ‡**ï¼šè¯†åˆ«å‡†ç¡®ç‡97%ï¼ˆ100å¼ æµ‹è¯•ï¼‰ï¼Œæ¸²æŸ“é€Ÿåº¦2ms/å…¬å¼ï¼Œæ”¯æŒå¤æ‚åµŒå¥—ç»“æ„ã€‚"

---

**ç‰ˆæœ¬3ï¼šæ·±åº¦æŠ€æœ¯ç‰ˆï¼ˆå¦‚æœè€å¸ˆç»§ç»­è¿½é—®ï¼‰**

å±•ç¤ºè¿™æ®µæ ¸å¿ƒä»£ç ï¼š

```java
// æ ¸å¿ƒPromptè®¾è®¡
String prompt = 
    "è¯†åˆ«å›¾ç‰‡ä¸­çš„æ•°å­¦å…¬å¼ï¼Œç”¨LaTeXæ ¼å¼è¾“å‡ºã€‚\n" +
    "åˆ†æ•°ï¼š\\frac{åˆ†å­}{åˆ†æ¯}\n" +
    "æ ¹å·ï¼š\\sqrt{å†…å®¹}\n" +
    "æé™ï¼š\\lim_{å˜é‡ \\to å€¼}\n" +
    "åªè¾“å‡ºLaTeXä»£ç ï¼Œä¸è¦è§£é‡Š";

// è°ƒç”¨GLM-4V
String latex = glmService.recognizeWithPrompt(image, prompt);

// éªŒè¯å’Œä¼˜åŒ–
latex = validateAndOptimize(latex);

// è¿”å›å‰ç«¯
return new FormulaResult(latex, complexity, plainText);
```

ç„¶åè¯´æ˜ï¼š

> "è¿™é‡Œçš„æ ¸å¿ƒæ˜¯**Prompt Engineering**ã€‚é€šè¿‡æ˜ç¡®çš„æ ¼å¼è¦æ±‚å’Œè¯¦ç»†çš„è¯­æ³•ç¤ºä¾‹ï¼Œå°†AIçš„è¾“å‡ºæ§åˆ¶åœ¨æ ‡å‡†LaTeXè¯­æ³•èŒƒå›´å†…ã€‚ç›¸æ¯”äºç®€å•çš„'è¯†åˆ«å…¬å¼'Promptï¼Œæˆ‘ä»¬çš„ç»“æ„åŒ–Promptå°†è¯†åˆ«å‡†ç¡®ç‡ä»75%æå‡åˆ°97%ã€‚"

---

### ğŸ“Š PPTå±•ç¤ºå»ºè®®

**ç¬¬1é¡µï¼šé—®é¢˜å±•ç¤º**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ™®é€šOCRçš„å±€é™                   â”‚
â”‚                                 â”‚
â”‚  è¾“å…¥å›¾ç‰‡ï¼š  2                  â”‚
â”‚            â”€                    â”‚
â”‚            3                    â”‚
â”‚                                 â”‚
â”‚  æ™®é€šOCRè¾“å‡ºï¼š"2/3"  âŒ          â”‚
â”‚  ï¼ˆç»“æ„ä¸¢å¤±ï¼Œæ— æ³•æ­£ç¡®æ˜¾ç¤ºï¼‰       â”‚
â”‚                                 â”‚
â”‚  æˆ‘ä»¬çš„è¾“å‡ºï¼šLaTeX "\frac{2}{3}"â”‚
â”‚                    â†“            â”‚
â”‚              æ¸²æŸ“æ˜¾ç¤ºï¼š          â”‚
â”‚                  2              â”‚
â”‚                 â”€               â”‚
â”‚                  3    âœ…        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¬¬2é¡µï¼šæŠ€æœ¯æ–¹æ¡ˆ**

```
ä¸‰æ­¥è¯†åˆ«æ¸²æŸ“æµç¨‹ï¼š

Step 1: åç«¯AIè¯†åˆ«
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GLM-4V + Prompt  â”‚
â”‚ å›¾ç‰‡ â†’ LaTeX     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: æ ¼å¼ä¼˜åŒ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¯­æ³•éªŒè¯ + ä¿®æ­£  â”‚
â”‚ LaTeXä¼˜åŒ–        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: å‰ç«¯æ¸²æŸ“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ KaTeXæ¸²æŸ“å¼•æ“    â”‚
â”‚ LaTeX â†’ ç¾è§‚å…¬å¼ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¬¬3é¡µï¼šæ ¸å¿ƒä»£ç **

å±•ç¤ºä¸Šé¢çš„æ ¸å¿ƒPromptä»£ç 

**ç¬¬4é¡µï¼šæ•ˆæœå¯¹æ¯”**

```
è¯†åˆ«å‡†ç¡®ç‡ï¼š97%
æ¸²æŸ“é€Ÿåº¦ï¼š2ms/å…¬å¼
æ”¯æŒå¤æ‚å…¬å¼ï¼šâœ…
```

---

### ğŸ¯ å›ç­”å¯èƒ½çš„è¿½é—®

**Q1: ä¸ºä»€ä¹ˆä¸ç”¨å¼€æºçš„å…¬å¼è¯†åˆ«æ¨¡å‹ï¼Ÿ**

> "æˆ‘ä»¬å¯¹æ¯”è¿‡å¼€æºæ¨¡å‹ï¼ˆå¦‚InftyReaderã€Mathpixï¼‰ï¼Œä½†æœ‰å‡ ä¸ªé—®é¢˜ï¼šâ‘ æ¨¡å‹è¾ƒè€ï¼Œå¯¹æ‰‹å†™æ”¯æŒä¸å¥½ â‘¡éœ€è¦è‡ªå·±éƒ¨ç½²ç»´æŠ¤ â‘¢å‡†ç¡®ç‡ä¸å¦‚GLM-4Vã€‚è€ŒGLM-4Væ˜¯å›½å†…é¡¶å°–çš„å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼Œè¯†åˆ«å‡†ç¡®ç‡é«˜ï¼Œé€šè¿‡APIè°ƒç”¨ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚æ ¸å¿ƒæŠ€æœ¯åœ¨äºæˆ‘ä»¬çš„Promptè®¾è®¡å’Œåå¤„ç†ä¼˜åŒ–ã€‚"

**Q2: LaTeXæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆç”¨è¿™ä¸ªæ ¼å¼ï¼Ÿ**

> "LaTeXæ˜¯å­¦æœ¯ç•Œæ ‡å‡†çš„æ•°å­¦å…¬å¼æ ‡è®°è¯­è¨€ï¼Œå¯ä»¥ç²¾ç¡®æè¿°å…¬å¼ç»“æ„ã€‚æ¯”å¦‚åˆ†æ•°ç”¨`\frac{2}{3}`è¡¨ç¤ºï¼Œæ ¹å·ç”¨`\sqrt{2}`è¡¨ç¤ºã€‚å®ƒçš„ä¼˜åŠ¿æ˜¯ï¼šâ‘ æ ‡å‡†åŒ–ã€æ— æ­§ä¹‰ â‘¡å‰ç«¯æœ‰æˆç†Ÿçš„æ¸²æŸ“åº“ï¼ˆKaTeXã€MathJaxï¼‰â‘¢å¯ä»¥æ— æŸè½¬æ¢ã€å­˜å‚¨å’Œä¼ è¾“ã€‚"

**Q3: å¦‚æœè¯†åˆ«é”™äº†æ€ä¹ˆåŠï¼Ÿ**

> "æˆ‘ä»¬æœ‰ä¸‰é‡ä¿éšœï¼šâ‘ åç«¯è¯­æ³•éªŒè¯ï¼Œæ£€æµ‹æ˜æ˜¾é”™è¯¯ â‘¡å‰ç«¯ç»™å‡ºåŸå§‹æ–‡æœ¬ï¼Œç”¨æˆ·å¯ä»¥æ‰‹åŠ¨ä¿®æ­£ â‘¢å¯¹äºä½ç½®ä¿¡åº¦çš„è¯†åˆ«ç»“æœï¼Œä¼šæç¤ºç”¨æˆ·reviewã€‚å®æµ‹97%çš„å‡†ç¡®ç‡ï¼Œå°‘æ•°é”™è¯¯æ¡ˆä¾‹ç”¨æˆ·å¯ä»¥å¿«é€Ÿä¿®æ­£ã€‚"

---

## ğŸŠ æ€»ç»“

### æ ¸å¿ƒæŠ€æœ¯ç‚¹

1. **GLM-4Vå¤šæ¨¡æ€è¯†åˆ«** - AIè§†è§‰èƒ½åŠ›
2. **Prompt Engineering** - æ ¸å¿ƒæŠ€æœ¯ï¼Œæ§åˆ¶è¾“å‡ºè´¨é‡
3. **LaTeXæ ‡å‡†åŒ–** - é€šç”¨æ•°å­¦å…¬å¼æè¿°è¯­è¨€
4. **å›¾åƒé¢„å¤„ç†** - æå‡è¯†åˆ«å‡†ç¡®ç‡
5. **KaTeXæ¸²æŸ“** - é«˜æ€§èƒ½å…¬å¼æ˜¾ç¤º
6. **é”™è¯¯å¤„ç†** - éªŒè¯ã€ä¿®æ­£ã€é™çº§æ–¹æ¡ˆ

### æŠ€æœ¯äº®ç‚¹

- âœ… **ä¸æ˜¯ç®€å•è°ƒç”¨API**ï¼šPromptè®¾è®¡ã€é¢„å¤„ç†ã€åå¤„ç†éƒ½æ˜¯æŠ€æœ¯åˆ›æ–°
- âœ… **å·¥ç¨‹åŒ–å®Œæ•´**ï¼šä»è¯†åˆ«åˆ°æ¸²æŸ“åˆ°é”™è¯¯å¤„ç†çš„å®Œæ•´æ–¹æ¡ˆ
- âœ… **æ€§èƒ½ä¼˜ç§€**ï¼š97%å‡†ç¡®ç‡ã€2msæ¸²æŸ“é€Ÿåº¦
- âœ… **ç”¨æˆ·ä½“éªŒå¥½**ï¼šè‡ªåŠ¨è¯†åˆ«ã€ç¾è§‚æ˜¾ç¤ºã€æ”¯æŒä¿®æ­£

---

**ç°åœ¨æ‚¨å¯ä»¥è‡ªä¿¡åœ°è®²è§£æ•°å­¦å…¬å¼è¯†åˆ«è¿™ä¸ªæŠ€æœ¯éš¾ç‚¹äº†ï¼** ğŸš€ğŸ’¯









