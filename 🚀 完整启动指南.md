# 🚀 知错就改项目 - 完整启动指南

## 📋 前置要求

确保已安装以下软件：
- ✅ JDK 17+
- ✅ Node.js 16+  
- ✅ MySQL 8.0+
- ✅ Maven 3.6+

---

## 📦 一、数据库配置

### 1. 创建数据库
```bash
mysql -u root -p
```

```sql
CREATE DATABASE zszg CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 2. 执行初始化脚本
```bash
# 方式1：执行完整的schema.sql
mysql -u root -p zszg < backend/zszg-backend/src/main/resources/schema.sql

# 方式2：执行更新脚本（包含所有表和示例数据）
mysql -u root -p zszg < update-database.sql
```

### 3. 修改数据库配置
编辑 `backend/zszg-backend/src/main/resources/application.yml`:
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/zszg?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai
    username: root
    password: 你的MySQL密码  # 修改这里
```

---

## 🔧 二、后端启动

### 方式1：使用IDEA（推荐）
1. 用IntelliJ IDEA打开 `backend/zszg-backend` 目录
2. 等待Maven依赖下载完成
3. 找到 `ZszgBackendApplication.java`
4. 右键 → Run 'ZszgBackendApplication'

### 方式2：使用命令行
```bash
cd backend/zszg-backend

# Windows
.\mvnw.cmd clean spring-boot:run

# Linux/Mac
./mvnw clean spring-boot:run
```

### ✅ 验证后端启动成功
- 控制台看到：`Started ZszgBackendApplication in X seconds`
- 访问：http://localhost:8080
- API文档（如果配置了）：http://localhost:8080/swagger-ui.html

---

## 🎨 三、前端启动

### 1. 安装依赖（首次或package.json更新后）
```bash
cd frontend/zszg-frontend
npm install
```

### 2. 启动开发服务器
```bash
npm run dev
```

### ✅ 验证前端启动成功
终端显示：
```
VITE v5.x.x  ready in xxx ms
➜  Local:   http://localhost:5173/
```

---

## 🎯 四、访问系统

### 1. 打开浏览器
访问：**http://localhost:5173**

### 2. 测试账号
| 角色 | 用户名 | 密码 | 功能 |
|------|--------|------|------|
| 管理员 | admin | 123456 | 用户管理、审核、系统设置 |
| 教师 | teacher | 123456 | 班级管理、任务发布、数据分析 |
| 学生 | student | 123456 | 错题管理、共享池、推荐练习 |

---

## ✨ 五、核心功能清单

### 学生端功能
✅ 错题本管理（增删改查）
  - 手动录入错题
  - 📸 拍照识别录入（AI OCR）
  - AI智能分析错题
  - 向AI提问
  - 查看相似题推荐
  - 知识点图谱

✅ 智能推荐
  - 基于错题历史的个性化推荐
  - 按学科筛选推荐题目
  - 练习题库

✅ 错题共享池
  - 浏览优质共享错题
  - 点赞、收藏
  - 复制到错题本
  - AI智能推荐

✅ 班级功能
  - 加入班级
  - 查看班级推送
  - 查看任务列表
  - 完成任务

✅ 个人中心
  - 学习统计
  - 错题分析图表

### 教师端功能
✅ 班级管理
  - 创建班级
  - 管理学生
  - 生成邀请码

✅ 智能任务推送
  - 自然语言描述任务
  - 📍 AI自动解析（时间、类型、要求等）
  - 批量推送给班级学生
  - 查看完成情况

✅ 教学数据分析
  - 班级错题统计
  - 学科分布图表
  - 难度分布分析
  - 高频错题TOP10
  - 🧠 AI教学诊断报告

✅ 资源管理
  - 上传教学资源
  - 在线预览
  - 分类管理

✅ 教学反馈
  - 查看学生错题
  - 添加点评
  - 评分

### 管理员端功能
✅ 用户管理（CRUD）
✅ 题库管理
✅ 内容审核（共享池、资源）
✅ 系统设置

---

## 🔥 AI功能说明

### 1. GLM-4V 拍照识别
- **位置**：学生端 → 错题本 → 添加错题 → 拍照识别
- **功能**：自动识别题目内容、公式、图表、答案
- **配置**：已在 `application.yml` 中配置GLM API密钥

### 2. 智能任务解析（NLP）
- **位置**：教师端 → 任务推送
- **功能**：自然语言描述任务，AI自动提取：
  - 截止时间
  - 任务类型
  - 数量要求
  - 优先级
  - 学习目标
  - 子任务拆解

### 3. AI错题分析
- **位置**：学生端 → 错题本 → AI分析
- **功能**：
  - 智能分析错因
  - 提取知识点
  - 推荐相似题
  - 生成思维导图

### 4. AI教学诊断
- **位置**：教师端 → 数据分析 → AI智能分析
- **功能**：
  - 班级薄弱点分析
  - 学习趋势预测
  - 个性化教学建议

---

## 🛠️ 常见问题

### 1. 后端启动失败
**问题**：数据库连接失败
```
Error: Access denied for user 'root'@'localhost'
```

**解决**：
- 检查MySQL是否启动：`mysql --version`
- 确认密码正确：修改 `application.yml`
- 确认数据库已创建：`CREATE DATABASE zszg`

### 2. 前端连接后端失败
**问题**：CORS错误或Network Error

**解决**：
- 确认后端已启动（8080端口）
- 检查 `frontend/zszg-frontend/src/lib/api.ts` 中的 baseURL
- 后端配置了CORS：`GlobalCorsConfig.java`

### 3. AI功能不可用
**问题**：AI分析、拍照识别失败

**解决**：
- 检查GLM API密钥是否正确配置
- 查看后端日志是否有API调用错误
- 确认网络连接正常

### 4. 文件上传失败
**问题**：上传资源或图片时报错

**解决**：
- 确保项目根目录有 `uploads` 文件夹
- 检查文件大小限制（当前50MB）
- 查看后端日志

---

## 📊 数据库表结构

### 核心表
- `t_user` - 用户表
- `t_question` - 题目表
- `t_knowledge` - 知识点表
- `t_error_book` - 错题本
- `t_share_pool` - 共享池
- `t_resource` - 资源表
- `t_class` - 班级表
- `t_class_member` - 班级成员
- `t_task` - 任务表 ⭐
- `t_student_task` - 学生任务 ⭐
- `t_teacher_feedback` - 教师反馈

---

## 🔄 开发模式热重载

### 后端
- IDEA：开启自动编译（Build → Compiler → Build project automatically）
- 代码修改后自动重启

### 前端
- Vite默认支持热重载
- 保存文件后浏览器自动刷新

---

## 📝 技术栈

### 后端
- Spring Boot 3.3.2
- Spring Security + JWT
- MySQL 8.0
- Spring Data JPA
- Maven

### 前端
- Vue 3 (Composition API)
- Vite 5
- Element Plus 2.8
- ECharts 5
- Axios
- TypeScript

### AI服务
- GLM-4V（智谱AI）- 视觉识别
- GLM-4（智谱AI）- 自然语言处理

---

## 📞 技术支持

如遇到问题：
1. 查看后端控制台日志
2. 查看浏览器控制台（F12）
3. 查看本文档的"常见问题"部分
4. 检查数据库连接和数据

---

## 🎉 开始使用

```bash
# 1. 启动MySQL数据库

# 2. 启动后端（新终端）
cd backend/zszg-backend
./mvnw spring-boot:run

# 3. 启动前端（新终端）
cd frontend/zszg-frontend
npm run dev

# 4. 浏览器访问
# http://localhost:5173
```

**祝你使用愉快！** 🎊

---

## 💡 项目亮点

✨ **AI赋能教育**
- 拍照识别自动录入
- 智能任务解析
- 个性化学习推荐
- 教学数据智能分析

🎯 **完整的教学闭环**
- 错题收集 → 分析 → 练习 → 改进
- 教师 ↔ 学生双向反馈

🚀 **现代化技术架构**
- 前后端分离
- RESTful API
- 响应式设计
- 实时数据可视化

---

<div align="center">
  <p>Made with ❤️ by Software Engineering Student</p>
  <p>© 2025 知错就改学习平台</p>
</div>

